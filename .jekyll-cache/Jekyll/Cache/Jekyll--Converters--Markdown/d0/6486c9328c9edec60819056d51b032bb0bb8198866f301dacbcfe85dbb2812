I"¯X<h2 id="learning-goals">Learning Goals</h2>

<ul>
  <li>Refactor an existing vanilla JS or jQuery application to use React</li>
</ul>

<h2 id="integrating-react-with-existing-client-application">Integrating React with Existing Client Application</h2>

<p>Let‚Äôs start by cloning down a repo so we can all problem solve through the same thing together. Once we get a feel for it, you‚Äôll have time to work on React-ifying your own Quantified Self project!</p>

<p><a href="https://github.com/ameseee/react-integration">Fork/clone this repo</a>, then run in your terminal:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install
</span>npm start
</code></pre></div></div>

<p>Make sure the project is up and running in your browser.</p>

<h3 id="installing-modules">Installing Modules</h3>

<p><a href="https://facebook.github.io/react/docs/installation.html">Per the React docs</a>, we‚Äôll need a few dependencies:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># within root of project directory</span>
npm <span class="nb">install</span> <span class="nt">--save</span> react react-dom
npm <span class="nb">install</span> <span class="nt">--save-dev</span> babel-cli babel-preset-react babel-preset-es2015
<span class="nb">echo</span> <span class="s1">'{ "presets": ["react", "es2015"] }'</span> <span class="o">&gt;</span> .babelrc
</code></pre></div></div>

<h3 id="project-integration">Project Integration</h3>

<p>Hop into the project‚Äôs <code class="highlighter-rouge">index.js</code> and add your React imports:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// index.js</span>
<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span>
<span class="k">import</span> <span class="nx">ReactDOM</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-dom</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div></div>

<p>Let‚Äôs just see what kind of power React can have:</p>

<p>On the <code class="highlighter-rouge">&lt;body&gt;</code> tag in index.html, let‚Äôs add <code class="highlighter-rouge">id="root"</code></p>

<p>In <code class="highlighter-rouge">index.js</code>, type this under all the imports:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Hello</span><span class="p">,</span> <span class="nx">world</span><span class="o">!&lt;</span><span class="sr">/h1&gt;, document.getElementById</span><span class="se">(</span><span class="sr">'root'</span><span class="se">)</span><span class="err">)
</span></code></pre></div></div>

<p>Navigate to your page in the browser - WHOA!</p>

<p>By targeting the entire <code class="highlighter-rouge">&lt;body&gt;</code> tag with that <code class="highlighter-rouge">ReactDOM.render()</code>, we essentially over-wrote everything else. We don‚Äôt want that. Try creating an <code class="highlighter-rouge">&lt;h1&gt;</code> tag just below the body tag, and giving that tag the <code class="highlighter-rouge">id="root"</code> instead. See what happens? We choose WHERE to infuse React Components.</p>

<p>We‚Äôre ready to start searching down elements of the UI to transform into Components.</p>

<h3 id="components">Components</h3>

<p>The easiest place to start with components would be to find an element of your UI that could almost be plucked out and put back into place. Think buttons, avatars, feeds, comments, etc.</p>

<p>Let‚Äôs look at that list of all foods available on the Main Diary page. It‚Äôs being rendered by:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">renderDiaryFood</span> <span class="o">=</span> <span class="p">(</span><span class="nx">food</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//</span>
<span class="p">}</span>
</code></pre></div></div>

<p>and right above that function, we see that we are forEach-ing over each food.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">getEachDiaryFood</span> <span class="o">=</span> <span class="p">(</span><span class="nx">foods</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">foods</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">food</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">renderDiaryFood</span><span class="p">(</span><span class="nx">foods</span><span class="p">)</span>
  <span class="p">})</span>
<span class="p">}</span>
</code></pre></div></div>

<p>THIS is the ü¶ÑPERFECTü¶Ñ opportunity to utilize React as a library for <strong>re-usable components</strong>. We are going to transform each of those ‚Äòfood rows‚Äô into a React component!</p>

<p>We will start out by:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// FoodComponent.js</span>
<span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">Food</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">I</span> <span class="nx">am</span> <span class="nx">a</span> <span class="nx">react</span> <span class="nx">component</span><span class="o">!&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>      <span class="c1">// later, we will iterate over foods and render the HTML/JSX for each food</span>
      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">Food</span><span class="p">;</span>
</code></pre></div></div>

<p>Before, we were using <code class="highlighter-rouge">ReactDOM.render()</code> to render an HTML element, and the JSX knew what that meant. We will now be rendering the <code class="highlighter-rouge">&lt;Food /&gt;</code> component, so we will to tell the file that will be rendering it, where it is!</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//diaryFoods.js</span>
<span class="k">import</span> <span class="nx">Food</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../foodComponent.js</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="code-along">Code along</h2>

<p>Let‚Äôs make this thing work.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//diaryFoods.js</span>

<span class="kd">const</span> <span class="nx">getEachDiaryFood</span> <span class="o">=</span> <span class="p">(</span><span class="nx">foods</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">renderDiaryFood</span><span class="p">(</span><span class="nx">foods</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">renderDiaryFood</span> <span class="o">=</span> <span class="p">(</span><span class="nx">food</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Food</span> <span class="nx">food</span><span class="o">=</span><span class="p">{</span><span class="nx">food</span><span class="p">}</span><span class="sr">/&gt;</span><span class="err">,
</span>    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">diary-food-table-info</span><span class="dl">'</span><span class="p">))</span>
  <span class="c1">// just comment out the prepend - it will come in handy soon!</span>
<span class="p">}</span>
</code></pre></div></div>

<p>We talked about the re-usability of React - it‚Äôs now going to be doing the work of iterating over our collection of foods, so we removed the <code class="highlighter-rouge">forEach()</code> within our <code class="highlighter-rouge">getEachDiaryFood</code> function.</p>

<p>Let‚Äôs talk about props - what props are we passing to our Food component?</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// FoodComponent.js</span>
<span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">Food</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">);</span>    <span class="c1">// Use console.logs to make sure you have what you think you have</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">I</span> <span class="nx">am</span> <span class="nx">a</span> <span class="nx">react</span> <span class="nx">component</span><span class="o">!&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>      <span class="c1">// later, we will iterate over foods and render the JSX for each food</span>
      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">Food</span><span class="p">;</span>
</code></pre></div></div>

<p>We should see that this <code class="highlighter-rouge">console.log</code> gave us an array of foods! It‚Äôs always a good idea to make 100% you know what you‚Äôre dealing with before getting messy with logic or anything else. You can use <code class="highlighter-rouge">console.log</code> and the <a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en">React Dev Tools</a>.</p>

<p>Now, let‚Äôs starting using those props to get our desired result.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Food</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">foods</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">foods</span><span class="p">;</span>           <span class="c1">// Storing in a variable just keeps things cleaner</span>
    <span class="kd">let</span> <span class="nx">mappedFoods</span> <span class="o">=</span> <span class="nx">foods</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">food</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="c1">// Mapping over the array of foods</span>
      <span class="k">return</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">article</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">food</span><span class="p">.</span><span class="nx">name</span><span class="o">&lt;</span><span class="sr">/p&gt;  /</span><span class="o">/</span> <span class="nx">Just</span> <span class="nx">checking</span> <span class="nx">that</span> <span class="nx">we</span> <span class="nx">are</span> <span class="nx">mapping</span> <span class="nx">and</span> <span class="nx">pulling</span> <span class="nx">the</span> <span class="nx">name</span> <span class="nx">out</span>
        <span class="o">&lt;</span><span class="sr">/article</span><span class="err">&gt;
</span>      <span class="p">)</span>
    <span class="p">})</span>

    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="p">{</span> <span class="nx">mappedFoods</span> <span class="p">}</span> <span class="c1">// Accessing the mappedFoods variable from above</span>
                        <span class="c1">// This will render whatever that variable is assigned to;</span>
                        <span class="c1">// in this case, a return of that `&lt;article&gt;` and it's contents</span>
      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<p>In the browser, we should see a list of foods names, but no calories or checkboxes (as expected). Now that we know we are mapping over the array of props correctly, let‚Äôs get the details in. This is where it‚Äôs helpful to go back and copy &amp; paste what we were earlier prepending to the DOM.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Food</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">foods</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">foods</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">mappedFoods</span> <span class="o">=</span> <span class="nx">foods</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">food</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">article</span>
          <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">food-item-row food-item-${food.id}</span><span class="dl">"</span>
          <span class="nx">data</span><span class="o">=</span><span class="dl">"</span><span class="s2">food-${food.id}</span><span class="dl">"</span>
        <span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">checkbox-container</span><span class="dl">"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">input</span>
              <span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">food-item-${food.id}</span><span class="dl">"</span>
              <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">checkbox</span><span class="dl">"</span>
              <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">food-item-checkbox</span><span class="dl">"</span>
            <span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="sr">/input</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">p</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">food-item-name</span><span class="dl">"</span><span class="o">&gt;</span><span class="p">{</span> <span class="nx">food</span><span class="p">.</span><span class="nx">name</span> <span class="p">}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">p</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">food-item-calories</span><span class="dl">"</span><span class="o">&gt;</span><span class="p">{</span> <span class="nx">food</span><span class="p">.</span><span class="nx">calories</span> <span class="p">}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/article</span><span class="err">&gt;
</span>      <span class="p">)</span>
    <span class="p">})</span>

    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="p">{</span> <span class="nx">mappedFoods</span> <span class="p">}</span>
      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<p>Check it out in the browser. You should see an some red in your console, with ‚ÄòWarning: Each child in an array or iterator should have a unique ‚Äúkey‚Äù prop.‚Äô Anytime we are re-using a component, React needs to have a unique identifier. Why? We talk about how great React is because it only re-renders what needs to be updated on the DOM; that <a href="https://reactjs.org/docs/lists-and-keys.html"><code class="highlighter-rouge">key</code></a> is what allows React to keep track of those. Not providing a key will not break your program, but it will slow it down and is not a good practice. <a href="https://giphy.com/gifs/shame-13lTgtSUmqMrlu">This</a> is how other developers will react if you don‚Äôt use keys.</p>

<p>How do we fix it? Give the ‚Äòsingle value‚Äô that the render function is returning, (in this case, the <code class="highlighter-rouge">&lt;article&gt;</code>) a key.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">&lt;</span><span class="nx">article</span>
    <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">food-item-row food-item-${food.id}</span><span class="dl">"</span>
    <span class="nx">data</span><span class="o">=</span><span class="dl">"</span><span class="s2">food-${food.id}</span><span class="dl">"</span>
    <span class="nx">key</span><span class="o">=</span><span class="p">{</span> <span class="nx">food</span><span class="p">.</span><span class="nx">id</span> <span class="p">}</span>
  <span class="o">&gt;</span>
</code></pre></div></div>

<p>We‚Äôre about there! In the Element Dev Tools, check out the class names and data values - we have an issue. React just expects a little bit different of syntax. Try this out, and make similar changes anywhere else it‚Äôs appropriate:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">&lt;</span><span class="nx">article</span>
    <span class="nx">className</span><span class="o">=</span><span class="p">{</span><span class="s2">`food-item-row food-item-</span><span class="p">${</span><span class="nx">food</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">}</span>
    <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="s2">`food-</span><span class="p">${</span><span class="nx">food</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">}</span>
    <span class="nx">key</span><span class="o">=</span><span class="p">{</span> <span class="nx">food</span><span class="p">.</span><span class="nx">id</span> <span class="p">}</span>
  <span class="o">&gt;</span>
</code></pre></div></div>

<p>Our application should be working just as it was before we integrated React.</p>

<h2 id="partner-time">Partner Time</h2>

<p>Suggestions:</p>

<p>On your Quantified Self projects:</p>
<ul>
  <li>Implement the same changes we just did on this repo, to build in that muscle memory</li>
  <li>Render the meals tables with a React component</li>
  <li>Render the list of foods on foods.html with a React component</li>
  <li>Create a controlled-form component on foods.html to add new foods</li>
</ul>

<h2 id="cfuinterview-questions">CFU/Interview Questions</h2>

<ul>
  <li>What packages/dependencies allow us to use React?</li>
  <li>When do you have to import a React component into another file?</li>
  <li>
    <p>Which Dev Tools are used while building a React App? What is the purpose of each?</p>
  </li>
  <li>What are the advantages and disadvantages of React?</li>
</ul>

<h2 id="related-resources">Related Resources</h2>

<ul>
  <li><a href="https://facebook.github.io/react/docs/installation.html">Add React to an Existing Application</a></li>
</ul>
:ET
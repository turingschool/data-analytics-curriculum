I"p<h2 id="learning-goals">Learning Goals</h2>

<ul>
  <li>Understand how file data is sent through an HTML form</li>
  <li>Understand how and why applications store file metadata in the database</li>
  <li>Build experience with both CarrierWave and PaperClip libraries</li>
</ul>

<h2 id="structure">Structure</h2>

<ul>
  <li>5 - Warmup</li>
  <li>20 - Lecture: HTTP, Files, and Databases</li>
  <li>5 - Break</li>
  <li>25 - Dig In: Using CarrierWave</li>
  <li>5 - Break</li>
  <li>20 - Dig In: Using PaperClip</li>
  <li>5 - Questions &amp; Recap</li>
</ul>

<h2 id="warmup">Warmup</h2>

<p>Answer the following questions to get started thinking about file uploads:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. When you submit a file to upload, how does that data get to the server?
2. Why do you think Heroku doesn't allow file uploads?
3. Both CarrierWave and Paperclip nest the files uploaded into folders, one file
per folder. Why would they do that?
4. Why do both libraries need database migrations to add columns to the database?
5. Have you used CarrierWave, Paperclip, or both? If both, do you have a preference?
</code></pre></div></div>

<h2 id="lecture-http-files-and-databases">Lecture: HTTP, Files, and Databases</h2>

<p>We’ll start with a full-group lecture/discussion:</p>

<ul>
  <li>How HTTP Multipart works</li>
  <li>Heroku and the Write-Only File System</li>
  <li>Sending Files to S3</li>
  <li>The Problem with Filenames</li>
  <li>File Metadata in the Database</li>
  <li>History of Paperclip &amp; Carrierwave</li>
</ul>

<h2 id="dig-in-carrierwave">Dig In: CarrierWave</h2>

<ul>
  <li>Clone the Storedom application at https://github.com/turingschool-examples/storedom</li>
  <li>Add functionality (controller actions, form) to allow adding an Item through the web interface</li>
  <li>Make a Git commit, then start a feature branch named <code class="highlighter-rouge">carrierwave</code></li>
  <li>Now add CarrierWave to the application: https://github.com/carrierwaveuploader/carrierwave</li>
  <li>Add an image upload to the Item creation</li>
  <li>Make sure it works correctly!</li>
  <li>Commit your changes to the feature branch</li>
</ul>

<h2 id="dig-in-paperclip">Dig In: Paperclip</h2>

<p>Let’s add a totally separate file upload to the same Storedom app.</p>

<ul>
  <li>Checkout the <code class="highlighter-rouge">master</code> branch then checkout a branch named <code class="highlighter-rouge">paperclip</code></li>
  <li>Implement <a href="https://github.com/thoughtbot/paperclip">Paperclip</a> to handle the
same file uploads</li>
  <li>Make sure it works</li>
  <li>Commit your Changes</li>
</ul>

<h2 id="bonus">Bonus</h2>

<p>If you have extra time, experiment with the built in image cropping, resizing,
and resampling tools from each library. You’ll need to have imagemagick and rmagick
installed. Installing them can be tricky, but hopefully this will work:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ brew update
$ brew install imagemagick
$ gem install rmagick
</code></pre></div></div>

<p>Then add <code class="highlighter-rouge">rmagick</code> to the <code class="highlighter-rouge">Gemfile</code>, bundle, and configure it following the
directions of the attachment library.</p>

<h2 id="corrections--improvements-for-next-time">Corrections &amp; Improvements for Next Time</h2>
:ET
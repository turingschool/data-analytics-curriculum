I"t<h2 id="materials">Materials</h2>

<ul>
  <li>1 marker per student</li>
  <li>1 sheet of printer paper per student</li>
  <li>Slide deck</li>
  <li>White boards around room (for Why GraphQL? activity)</li>
  <li>Posters (for closing activity)</li>
  <li>Print outs of each situation - probably 3 of each (for closing activity)</li>
</ul>

<h2 id="learning-goals">Learning Goals</h2>

<ul>
  <li>Explain what GraphQL is and the benefits of using it over REST</li>
  <li>Write an Express/GraphQL server</li>
  <li>Interact with a GraphQL API using GraphiQL</li>
</ul>

<p><a href="./intro_to_graphql_slides">Slides</a></p>

<h2 id="vocab">Vocab</h2>
<ul>
  <li>Graph</li>
  <li>GraphQL</li>
  <li>REST, RESTful APIS</li>
</ul>

<h2 id="warmup">Warmup</h2>

<p>Write your answer to the following:</p>
<ul>
  <li>Why do we use APIs?</li>
  <li>What makes an API RESTful?</li>
  <li>Why do we commonly see <code class="highlighter-rouge">/api/v1/</code> included in RESTful API endpoints?</li>
</ul>

<h2 id="why-graphql-activity">Why GraphQL? ACTIVITY</h2>

<p>Let’s say we are building LinkedIn for Puppies. Each puppy-user would have a name, company, title, education, favorite treat, parent names, and best friends.</p>

<ul>
  <li>With a partner, whiteboard the JSON response from <code class="highlighter-rouge">api/v1/puppy/:id</code>.</li>
  <li>Class should come back together and discuss very quickly.</li>
  <li>Instructor needs to give directions to facilitate the following:</li>
  <li>Each person should have a sheet of paper with one puppy-user attribute written on it. (Instructor will need to assign so we don’t overlap. Make sure you have something like <code class="highlighter-rouge">company</code> - where we’d get an ID back then need to make another request)</li>
  <li>The class needs to group together like a big JSON object.</li>
  <li>Once the group is together like a JSON object on one side of the room, instructor is on other side of the room.
    <ul>
      <li>Over-Fetching: Instructor says: I need the puppy-user name - what are you going to send me, server? (The whole group should walk over together.) Well, I didn’t want all of you, but I guess I can just weed the rest of you out. I need the puppy-user name and favorite toys. What are you going to send me? (The whole group should walk over.) I didn’t want everyone!STAMP the idea: We are currently OVER-FETCHING. Only want one thing but get a bunch back.</li>
      <li>Under-Fetching: Instructor says: Now I need the name and location of the company that the pet works at. What are you going to do server? (I get the whole JSON object, including the companyId). Now I have to make another request to get all the companies info. STAMP the idea: We are currently UNDER-FETCHING, making a request to the restful API, get a company id, and now have to go back out to another endpoint and ask for it. Ugh.</li>
    </ul>
  </li>
  <li>Now that you have explain and illustrated the ideas of under and over fetching, have a turn-and-talk where students have to say these things back to each other (there is a slide for this).</li>
</ul>

<h3 id="disadvantages-to-rest">Disadvantages to REST</h3>

<ul>
  <li>Deciding on URL schema gets tough with heavily nested relationships</li>
  <li>Sometimes it takes too many HTTP requests to get the data we need</li>
  <li>It’s common to over-fetch data (getting everything back when we only needed one property)</li>
</ul>

<p>The second and third bullets especially cause problems as over 60% of internet users are on mobile devices.</p>

<h3 id="another-solution---graphql">Another Solution - GraphQL</h3>

<p>When Facebook was re-building their native mobile applications in 2012, they ran into some problems - server queries written didn’t match what they wanted in their apps, and there was a considerable amount of code needed to parse data had to be written on both server and client side. So, they invented GraphQL. In 2015, Facebook released it to the public.</p>

<p>Some of it’s features:</p>
<ul>
  <li>Defines a data shape</li>
  <li>Hierarchical</li>
  <li>Strongly Typed</li>
  <li>Protocol, not storage</li>
  <li>Introspective</li>
  <li>Version free</li>
</ul>

<p>Read more on these <a href="https://code.fb.com/core-data/graphql-a-data-query-language/">here</a>.</p>

<h2 id="linkedin-for-pets-apis">LinkedIn for Pets APIs</h2>

<ul>
  <li>Show images of REST visualization, vs GraphQL visualization, and an example query.</li>
</ul>

<h2 id="building-a-graphql-server">Building a GraphQL Server</h2>

<p>To get started, clone down <a href="https://github.com/ameseee/graphql-pets">this repo</a> and follow the directions on the README.</p>

<h3 id="familiarize-yourself-with-the-boilerplate-code">Familiarize yourself with the boilerplate code</h3>

<ul>
  <li>What do you have in localhost:3000? 4000? Are you clear on where those are coming from? If not (yet), that’s ok.</li>
  <li>First, investigate the dependencies in the <code class="highlighter-rouge">package.json</code> - what has been installed, and what job do you think each dependency has?</li>
  <li>As mentioned in the README of the repo, a JSON DB is being used to avoid time spent on setting up databases on machines for this lesson. Take a look at <code class="highlighter-rouge">db.json</code> to familiarize yourself with our initial data.</li>
  <li>Now, let’s take a look at <code class="highlighter-rouge">server.js</code> - this is an Express server built <em>with</em> GraphQL, so you’ll still see some of the things you’re familiar with!</li>
  <li>Lastly, let’s check out <code class="highlighter-rouge">schema.js</code> - this file is where we will be doing all our work today.</li>
  <li>Now, are you clear on what you have in localhost:3000 and 400 and where those are coming from?</li>
</ul>

<h3 id="building-our-schema---root-query">Building our Schema - Root Query</h3>

<p>We know a little bit about what the <code class="highlighter-rouge">graph</code> looks like - but where is the starting point? The cool thing about GraphQL is, we get to decide what we want out starting point(s) to be. The purpose of a Root Query is to jump and land on a very specific piece of data in the graph.</p>

<p>In <code class="highlighter-rouge">schema.js</code>, create a <code class="highlighter-rouge">RootQuery</code> object:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">RootQuery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GraphQLObjectType</span><span class="p">({</span>

<span class="p">});</span>
</code></pre></div></div>

<p>The GraphQLObjectType has two required properties:</p>
<ul>
  <li><code class="highlighter-rouge">name</code> - will always be a string that describes the type being defined. By convention, we would use ‘Pet’ here (notice the capital P)</li>
  <li><code class="highlighter-rouge">fields</code> - an object that tells GraphQL about all of the properties on this type. For a RootQuery,</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">RootQuery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GraphQLObjectType</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">RootQueryType</span><span class="dl">'</span><span class="p">,</span>   <span class="c1">// name is a required property</span>
  <span class="na">fields</span><span class="p">:</span> <span class="p">{</span>                <span class="c1">// fields is a required property</span>

  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Let’s start by building a Root Query for a specific pet, so someone can jump into the graph and land right on a specific pet’s data.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">RootQuery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GraphQLObjectType</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">RootQueryType</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">fields</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">pet</span><span class="p">:</span> <span class="p">{</span>                                <span class="c1">// an object</span>
      <span class="na">type</span><span class="p">:</span> <span class="nx">PetType</span><span class="p">,</span>                      <span class="c1">// indicating the type of object that will be given back</span>
      <span class="na">args</span><span class="p">:</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nx">GraphQLString</span> <span class="p">}}</span><span class="c1">// expects an argument of ID</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p>We’ve <em>almost</em> instructed GraphQL that it can jump into the graph and get a pet’s data. Everything we’ve written up until now tells us what the data looks like, but we need to DO something with it. The last required property on our pet field is the <code class="highlighter-rouge">resolve</code> function and it does the magic:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">RootQuery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GraphQLObjectType</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">RootQueryType</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">fields</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">pet</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">type</span><span class="p">:</span> <span class="nx">PetType</span><span class="p">,</span>
          <span class="na">args</span><span class="p">:</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nx">GraphQLString</span> <span class="p">}</span> <span class="p">},</span>
          <span class="nx">resolve</span><span class="p">(</span><span class="nx">parentValue</span><span class="p">,</span> <span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s2">`http://localhost:3000/pets/</span><span class="p">${</span><span class="nx">args</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
          <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p>In the code above, we are using the id property from <code class="highlighter-rouge">args</code> which was whatever argument was passed in the request; in this case, the ID. We are making an HTTP request to our JSON database to that endpoint, then cleaning with with <code class="highlighter-rouge">response.data</code>.</p>

<p><strong>On your own,</strong> add a <code class="highlighter-rouge">company</code> field on the RootQuery.</p>

<h3 id="building-our-schema---types">Building our Schema - Types</h3>

<p>Let’s start by instructing GraphQL about what our Pet and Company data will look like, by building Object Types.</p>

<p>In <code class="highlighter-rouge">schema.js</code>, create a <code class="highlighter-rouge">PetType</code> object:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">PetType</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GraphQLObjectType</span><span class="p">({</span>

<span class="p">});</span>
</code></pre></div></div>

<p>The GraphQLObjectType has two required properties:</p>
<ul>
  <li><code class="highlighter-rouge">name</code> - string that describes the type</li>
  <li><code class="highlighter-rouge">fields</code> - an object that tells GraphQL about all of the properties on this type. Keys are names of properties, and values should indicate what type of data the properties hold.</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">PetType</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GraphQLObjectType</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Pet</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">fields</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">({</span>
    <span class="na">id</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nx">GraphQLString</span> <span class="p">},</span>
    <span class="na">firstName</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nx">GraphQLString</span> <span class="p">},</span>
    <span class="na">age</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nx">GraphQLInt</span> <span class="p">}</span>
  <span class="p">})</span>
<span class="p">});</span>
</code></pre></div></div>

<p><strong>On your own</strong> build out the <code class="highlighter-rouge">CompanyType</code> - reference the <code class="highlighter-rouge">db.json</code> to find out what properties it should have.</p>

<h3 id="what-about-the-pet-company-relationship">What about the Pet-Company Relationship?</h3>

<p>As of now, pets don’t know about companies and companies don’t know about pets - we have not told our schema anything about their relationship. We treat associations exactly like any other field, with a type:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">PetType</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GraphQLObjectType</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Pet</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">fields</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">({</span>
    <span class="na">id</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nx">GraphQLString</span> <span class="p">},</span>
    <span class="na">firstName</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nx">GraphQLString</span> <span class="p">},</span>
    <span class="na">age</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nx">GraphQLInt</span> <span class="p">},</span>
    <span class="na">company</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nx">CompanyType</span> <span class="p">}</span>  <span class="c1">// add in the name of field and type</span>
  <span class="p">})</span>
<span class="p">});</span>
</code></pre></div></div>

<p>..but we <strong>also</strong> need to define a resolve function, so GraphQL knows how to find the company that is associated with a given pet.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">PetType</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GraphQLObjectType</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Pet</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">fields</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">({</span>
    <span class="na">id</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nx">GraphQLString</span> <span class="p">},</span>
    <span class="na">firstName</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nx">GraphQLString</span> <span class="p">},</span>
    <span class="na">age</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nx">GraphQLInt</span> <span class="p">},</span>
    <span class="na">company</span><span class="p">:</span> <span class="p">{</span>            <span class="c1">// company !== companyId which our model has - why we need to resolve</span>
      <span class="na">type</span><span class="p">:</span> <span class="nx">CompanyType</span><span class="p">,</span>  <span class="c1">// expecting a CompanyType when we get the data back</span>
      <span class="nx">resolve</span><span class="p">(</span><span class="nx">parentValue</span><span class="p">,</span> <span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s2">`http://localhost:3000/companies/</span><span class="p">${</span><span class="nx">parentValue</span><span class="p">.</span><span class="nx">companyId</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
          <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>  
  <span class="p">})</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Not sure what <code class="highlighter-rouge">parentValue</code> is giving us or where it comes from? Do some console.logging to figure it out! (Remember, the console.log will only trigger if this resolve function is called, so you need to make a nested query in GraphiQL for a users’ company).</p>

<p>At this point, we should be able to go to GraphiQL and make a query. Make sure you’ve run <code class="highlighter-rouge">npm run dev</code> and visit <code class="highlighter-rouge">http://localhost:4000/graphql</code>.</p>

<p>A possible query:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  pet(id:"2") {
    firstName
  }
}
</code></pre></div></div>

<p>Did you get the following error?</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "errors": [
    {
      "message": "Query root type must be provided."
    }
  ]
}
</code></pre></div></div>

<p>What are we missing? We haven’t told the schema that we are exporting to include the RootQuery. At the bottom of the file, add:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GraphQLSchema</span><span class="p">({</span>
  <span class="na">query</span><span class="p">:</span> <span class="nx">RootQuery</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Now, press the play button in GraphiQL and you should get a response. Play around with different sets of data that you ask for!</p>

<p><strong>On your own,</strong> make sure the CompanyType knows about it’s association with pets. Back to GraphiQL - make sure you can start at both pet and company, and can access information about all the pets from one company, etc.</p>

<h3 id="mutations---the-rest-of-crud">Mutations - the rest of CRUD</h3>

<p>Now that we are successfully querying what we already have in our database, how do we add, delete, and change records? We will use <code class="highlighter-rouge">mutations</code> for all of these operations.</p>

<p>Let’s start by creating a new GraphQLObjectType:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">mutation</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GraphQLObjectType</span><span class="p">({</span>

<span class="p">});</span>
</code></pre></div></div>

<p>As we’ve seen in the RootQuery and Types, the required properties are <code class="highlighter-rouge">name</code> and <code class="highlighter-rouge">fields</code>:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">mutation</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GraphQLObjectType</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Mutation</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">fields</span><span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Each field will be our actions - let’s start with <code class="highlighter-rouge">addPet</code> to post a new pet to the database. It will have a type, args, and resolve function. The following is not complete, but will get you started:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">mutation</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GraphQLObjectType</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Mutation</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">fields</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">addPet</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">type</span><span class="p">:</span> <span class="nx">PetType</span><span class="p">,</span>
      <span class="na">args</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">firstName</span><span class="p">:</span> <span class="p">,</span> <span class="c1">// indicate what type of argument is expected</span>
        <span class="na">age</span><span class="p">:</span> <span class="p">,</span>       <span class="c1">// indicate what type of argument is expected</span>
        <span class="na">companyId</span><span class="p">:</span> <span class="p">,</span> <span class="c1">// indicate what type of argument is expected</span>
      <span class="p">},</span>
      <span class="nx">resolve</span><span class="p">(</span><span class="nx">parentValue</span><span class="p">,</span> <span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// make a post request with axios</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p>How can we require all of these arguments? Let’s create a new GraphQLNonNull object when we declare the types of arguments:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">args</span><span class="p">:</span> <span class="p">{</span>
  <span class="nl">firstName</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="k">new</span> <span class="nx">GraphQLNonNull</span><span class="p">(</span><span class="nx">GraphQLString</span><span class="p">)</span> <span class="p">},</span>
  <span class="nx">age</span><span class="p">:</span> <span class="p">{</span> <span class="nl">type</span><span class="p">:</span> <span class="k">new</span> <span class="nx">GraphQLNonNull</span><span class="p">(</span><span class="nx">GraphQLInt</span><span class="p">)</span> <span class="p">},</span>
  <span class="nx">companyId</span><span class="p">:</span> <span class="p">{</span> <span class="nl">type</span><span class="p">:</span> <span class="nx">GraphQLString</span> <span class="p">}</span>
<span class="p">},</span>
</code></pre></div></div>

<p>And lastly, your resolve should look like:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">resolve</span><span class="p">(</span><span class="nx">parentValue</span><span class="p">,</span> <span class="p">{</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">age</span><span class="p">,</span> <span class="nx">companyId</span> <span class="p">})</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">`http://localhost:3000/pets`</span><span class="p">,</span> <span class="p">{</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">age</span><span class="p">,</span> <span class="nx">companyId</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>NOTE: Make sure you understand why we didn’t use the parameter name <code class="highlighter-rouge">args</code> and how we got access to those firstName, age, and companyId variables.</p>

<p>Before you can test this out in GraphiQL, we have to export the mutation!</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GraphQLSchema</span><span class="p">({</span>
  <span class="na">query</span><span class="p">:</span> <span class="nx">RootQuery</span><span class="p">,</span>
  <span class="nx">mutation</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Try adding a pet in GraphiQL. Think about how your mutation request might need to be different from a query. If you’re stuck on this - <a href="https://hackernoon.com/mutations-in-graphql-9ac6a28202a2">read this blog</a>. If you run into errors - read carefully as they are usually quite helpful.</p>

<p><strong>On your own,</strong> write the mutations to editPet and deletePet. Test out in GraphiQL.</p>

<h3 id="refactoring">Refactoring</h3>

<p>The schema file is getting a little lengthy - can you pull each type, the RootQuery, and the mutation out into their own files and maintain functionality?</p>

<h2 id="complete-graphql-server">Complete GraphQL Server</h2>

<p>Congrats, you’ve written your first GraphQL server and tested it out in GraphiQL! You can see it takes a bit of setup, but the long term benefits are something many companies seeing are very much worth it.</p>

<h2 id="closing-activity">Closing Activity</h2>

<p>Split the class into three groups (or more), each group gets one topic and 6-8 minutes to plan a pitch and poster/whiteboard to use as a visual.</p>

<p>Once time is up, have each group present their pitch!</p>

<h3 id="making-the-case-for-graphql">Making the case for GraphQL</h3>

<p>Your manager is thinking about moving to GraphQL. Whatever you think about it in real life today, in this situation, you are on a mission to convince her that your company should move to it.</p>

<p>What’s your pitch?</p>

<h3 id="prevent-disaster">Prevent Disaster</h3>

<p>Your manager is thinking about moving to GraphQL. Whatever you think about it in real life today, in this situation, you are on a mission to make sure this horrible decision is not make because REST is the best.</p>

<p>What’s your pitch?</p>

<h3 id="educator">Educator</h3>

<p>Your manager is thinking about moving to GraphQL. It’s so much of a buzzword that it seems like some people on your team are all excited about it for that reason only.</p>

<p>Your job is to educate the team on what the purpose and benefits of GraphQL are, and how this compares to REST.</p>
:ET
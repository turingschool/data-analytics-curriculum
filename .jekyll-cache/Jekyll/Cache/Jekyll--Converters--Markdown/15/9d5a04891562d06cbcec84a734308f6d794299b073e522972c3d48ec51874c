I"®<h1 id="iteration-1---business-intelligence">Iteration 1 - Business Intelligence</h1>

<h2 id="starting-the-analysis-layer">Starting the Analysis Layer</h2>

<p>Our analysis will use the data to calculate information.</p>

<p>Who in the system will answer those questions? Assuming we have a <code class="highlighter-rouge">sales_engine</code> that‚Äôs an instance of <code class="highlighter-rouge">SalesEngine</code> let‚Äôs initialize a <code class="highlighter-rouge">SalesAnalyst</code> like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sales_analyst</span> <span class="o">=</span> <span class="n">sales_engine</span><span class="p">.</span><span class="nf">analyst</span>
</code></pre></div></div>

<p>Then ask/answer these questions:</p>

<h3 id="how-many-products-do-merchants-sell">How many products do merchants sell?</h3>

<p>Do most of our merchants offer just a few items or do they represent a warehouse?</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sales_analyst</span><span class="p">.</span><span class="nf">average_items_per_merchant</span> <span class="c1"># =&gt; 2.88</span>
</code></pre></div></div>

<p>And what‚Äôs the standard deviation?</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sales_analyst</span><span class="p">.</span><span class="nf">average_items_per_merchant_standard_deviation</span> <span class="c1"># =&gt; 3.26</span>
</code></pre></div></div>

<h3 id="note-on-standard-deviations">Note on Standard Deviations</h3>

<p>There are two ways for calculating standard deviations ‚Äì for a population and for a sample.</p>

<p>For this project, use the sample standard deviation.</p>

<p>As an example, given the set <code class="highlighter-rouge">3,4,5</code>. We would calculate the deviation using the following steps:</p>

<ol>
  <li>Take the difference between each number and the mean and square it</li>
  <li>Sum these square differences together</li>
  <li>Divide the sum by the number of elements minus 1</li>
  <li>Take the square root of this result</li>
</ol>

<p>Or, in pseudocode:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>set = [3,4,5]

std_dev = sqrt( ( (3-4)^2+(4-4)^2+(5-4)^2 ) / 2 )
</code></pre></div></div>

<h3 id="which-merchants-sell-the-most-items">Which merchants sell the most items?</h3>

<p>Maybe we could set a good example for our lower sellers by displaying the merchants who have the most items for sale. Which merchants are more than one standard deviation above the average number of products offered?</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sales_analyst</span><span class="p">.</span><span class="nf">merchants_with_high_item_count</span> <span class="c1"># =&gt; [merchant, merchant, merchant]</span>
</code></pre></div></div>

<h3 id="what-are-prices-like-on-our-platform">What are prices like on our platform?</h3>

<p>Are these merchants selling commodity or luxury goods? Let‚Äôs find the average price of a merchant‚Äôs items (by supplying the merchant ID):</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sales_analyst</span><span class="p">.</span><span class="nf">average_item_price_for_merchant</span><span class="p">(</span><span class="mi">12334159</span><span class="p">)</span> <span class="c1"># =&gt; BigDecimal</span>
</code></pre></div></div>

<p>Then we can sum all of the averages and find the average price across all merchants (this implies that each merchant‚Äôs average has equal weight in the calculation):</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sales_analyst</span><span class="p">.</span><span class="nf">average_average_price_per_merchant</span> <span class="c1"># =&gt; BigDecimal</span>
</code></pre></div></div>

<h3 id="which-are-our-golden-items">Which are our <em>Golden Items</em>?</h3>

<p>Given that our platform is going to charge merchants based on their sales, expensive items are extra exciting to us. Which are our ‚ÄúGolden Items‚Äù, those two standard-deviations above the average item price? Return the item objects of these ‚ÄúGolden Items‚Äù.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sales_analyst</span><span class="p">.</span><span class="nf">golden_items</span> <span class="c1"># =&gt; [&lt;item&gt;, &lt;item&gt;, &lt;item&gt;, &lt;item&gt;]</span>
</code></pre></div></div>
:ET
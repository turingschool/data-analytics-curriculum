I"⁄<<h2 id="learning-goals">Learning Goals</h2>

<ul>
  <li>Understand how to use #each to iterate over an array</li>
  <li>Understand how to transform, create a subset, and  create something new with #each</li>
</ul>

<h2 id="vocabulary">Vocabulary</h2>

<ul>
  <li>Collection</li>
  <li>Iteration</li>
  <li>Block</li>
  <li>Block Variable</li>
</ul>

<h2 id="warm-up">Warm Up</h2>

<ul>
  <li>What do you notice about the code below?</li>
  <li>What issues could potentially crop up?</li>
  <li>Is there an alternative you could propose?</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">students</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Megan"</span><span class="p">,</span> <span class="s2">"Bob"</span><span class="p">,</span> <span class="s2">"Mike"</span><span class="p">]</span>
<span class="nb">puts</span> <span class="n">students</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">puts</span> <span class="n">students</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="nb">puts</span> <span class="n">students</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</code></pre></div></div>

<h2 id="lesson">Lesson</h2>

<p>When we have a solution that works for a small number of items, but does not work for a large number of items, we say that <em>it doesn‚Äôt scale</em>. We want to design solutions that are dynamic, meaning they will work if we have 3 elements or 1 million elements.</p>

<h3 id="introduction">Introduction</h3>

<p>A <strong>Collection</strong> in Ruby is an Array or a Hash. For now, we will be focusing on Arrays.</p>

<p><strong>Iterating</strong> is doing something several times.</p>

<p><code class="highlighter-rouge">each</code> is a method that iterates over a collection. This means that <code class="highlighter-rouge">each</code> allows us to do something for every element of an array. An <strong>Iteration</strong> is a single pass over an element. We can use <code class="highlighter-rouge">each</code> to print all of our students like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">students</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Megan"</span><span class="p">,</span> <span class="s2">"Bob"</span><span class="p">,</span> <span class="s2">"Mike"</span><span class="p">]</span>

<span class="n">students</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">student</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="n">student</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Let‚Äôs break this down. <code class="highlighter-rouge">students</code> is our collection. It is an Array of three strings. <code class="highlighter-rouge">.each</code> is a method that we call on <code class="highlighter-rouge">students</code>.</p>

<p>Everything between the <code class="highlighter-rouge">do</code> and <code class="highlighter-rouge">end</code> is the <strong>Block</strong>. The <strong>Block</strong> is what runs for each element in the Array. Since we have three elements, this block will run a total of three times.</p>

<p><code class="highlighter-rouge">student</code> is the <strong>Block Variable</strong>. For each iteration, this variable will contain the current element we are iterating over. So for the first iteration, <code class="highlighter-rouge">student</code> holds the value <code class="highlighter-rouge">Megan</code>, the second time it holds the value <code class="highlighter-rouge">Bob</code>, and the third time it holds the value <code class="highlighter-rouge">Mike</code>.</p>

<p>In general, the format for using <code class="highlighter-rouge">.each</code> looks like this.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">collection</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">block_variable</span><span class="o">|</span>
  <span class="c1"># Code here runs for each element</span>
  <span class="c1"># the current element's value is stored in the block_variable variable</span>
<span class="k">end</span>
</code></pre></div></div>
<p><strong>Return Values</strong>
One very important thing to remember: <strong>each returns the original array</strong>. This will make more sense as we learn more about enumerables during a later lesson.</p>

<h3 id="when-to-use-each">When to use #each</h3>

<p>Aside from printing all of the elements in a list, there are <strong>a lot</strong> of situations where we would need to use #each.  You can use #each to transform elements within a collection, transform the collection itself into a new collection, locate specific elements from a collection, or create something new with some or all of the elements in a collection.  The possibilities are really endless, which makes #each (and iteration in general) one of the most useful tools in a developer‚Äôs skillset.</p>

<p>Ruby has other methods that allow you to manipulate arrays. We will learn more about them later, but each is the workhorse of the array world. If you ever aren‚Äôt quite sure if there‚Äôs a method to do specifically what you want, you can always use each.</p>

<h2 id="transform-every-element">Transform Every Element</h2>

<p>Often, you will have a collection of objects that you need to transform, or map, into a new collection.  For example, if you had the array <code class="highlighter-rouge">['mike', 'bob', 'megan']</code> and you needed the array <code class="highlighter-rouge">['Mike', 'Bob', 'Megan']</code> you could use #each to accomplish this goal.  Let‚Äôs open a playground.rb file and take a look:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#playground.rb</span>
<span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'mike'</span><span class="p">,</span> <span class="s1">'bob'</span><span class="p">,</span> <span class="s1">'megan'</span><span class="p">]</span>

<span class="n">names</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="nb">name</span><span class="o">|</span>
  <span class="nb">name</span><span class="p">.</span><span class="nf">capitalize</span>
<span class="k">end</span>

<span class="nb">p</span> <span class="n">names</span>
</code></pre></div></div>

<p>Run the playground file - what happens?</p>

<p>Is this what you expected?</p>

<p>Most students would expect to see <code class="highlighter-rouge">['Mike', 'Bob', 'Megan']</code>, so why is that not the case?</p>

<p>Each gives us <em>access</em> to every element, but it doesn‚Äôt save anything for us. If we want to save the capitalization (or save the transformed information), we need to create a place to save it, enter the accumulator:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'mike'</span><span class="p">,</span> <span class="s1">'bob'</span><span class="p">,</span> <span class="s1">'megan'</span><span class="p">]</span>

<span class="n">capitalized_names</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">names</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="nb">name</span><span class="o">|</span>
  <span class="n">capitalized_names</span> <span class="o">&lt;&lt;</span> <span class="nb">name</span>
<span class="k">end</span>

<span class="nb">p</span> <span class="n">capitalized_names</span>
</code></pre></div></div>

<p>Since we know that each won‚Äôt save anything for us, we need to create some placeholder container to store our <em>new</em> collection. In Mod 1, you may hear this placeholder called the accumulator or the aggregator. The thing to remember is that when you are using #each, you will almost always use some sort of placeholder to preserve the result that you want - in this case, the capitalized names.  Without the placeholder, you will not be able to access the information that you want!</p>

<p>Again - without the accumulator/placeholder/aggregator, you will NOT be able to access the information you want.</p>

<h2 id="get-a-subset-of-a-collection">Get a Subset of a Collection</h2>

<p>In the example above, we are using #each to create a new array that is the same length as the original array - we are doing something to and storing <em>each and every</em> element in the array. But what if we wanted to return only a subsection of a collection? We can still use #each!</p>

<p>Take a look at the example below - what do you think will be printed to the terminal when this file is executed?</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#playground.rb</span>
<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>

<span class="n">odd_numbers</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">numbers</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">number</span><span class="o">|</span>
  <span class="k">if</span> <span class="n">number</span><span class="p">.</span><span class="nf">odd?</span>
    <span class="n">odd_numbers</span> <span class="o">&lt;&lt;</span> <span class="n">number</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="nb">p</span> <span class="n">odd_numbers</span>

</code></pre></div></div>

<p>In this example, we can see how the addition of a simple boolean statement can help us use #each to accomplish a more complex task - grabbing only <em>some</em> of the elements in the array based on whether or not they meet a specific condition.</p>

<h2 id="create-something-new">Create Something New</h2>

<p>What if we want to use a collection to build something new? Say we have a collection of integers and we want to know the sum of all of those integers? Let‚Äôs take a look:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#playground.rb</span>
<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>

<span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">numbers</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">number</span><span class="o">|</span>
  <span class="n">total</span> <span class="o">+=</span> <span class="n">number</span>
<span class="k">end</span>

<span class="nb">puts</span> <span class="n">total</span>
</code></pre></div></div>

<p>Unlike our previous examples, here we can see how #each can be used to create something other than another collection.  In this case, we are using #each to collect a running total (or sum) of each of the elements within the original collection, <code class="highlighter-rouge">numbers</code>.</p>

<p>The examples we have outlined are by no means a complete list of the ways that #each can be used; they are only illustrations of the types of things you can accomplish with #each.  As you grow your skills as a programmer, you will find more and more complex uses for #each and iteration in general.</p>

<h2 id="single-line-syntax">Single-Line Syntax</h2>

<p>You can replace a <code class="highlighter-rouge">do</code>/<code class="highlighter-rouge">end</code> with <code class="highlighter-rouge">{</code>/<code class="highlighter-rouge">}</code>. This allows you to write <code class="highlighter-rouge">each</code> on a single line. Our example from before could also be written as:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">students</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Megan"</span><span class="p">,</span> <span class="s2">"Bob"</span><span class="p">,</span> <span class="s2">"Mike"</span><span class="p">]</span>
<span class="n">students</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">student</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">student</span> <span class="p">}</span>
</code></pre></div></div>

<p>Generally, we avoid using single-line syntax unless the operation inside the block is <em>very</em> short. In this example, it is appropriate since we have a short and simple operation.</p>

<p>‚ÄúProgramming is not like being in the CIA, you don‚Äôt get credit for being sneaky‚Äù - Justin Etheredge.</p>

<p>Readability matters more than being clever.</p>

<h1 id="practice">Practice</h1>

<p>Now it‚Äôs your turn to practice.</p>

<p>With your new best friends in your breakout room, use the following array with
<code class="highlighter-rouge">.each</code> to complete the following:</p>

<p><code class="highlighter-rouge">singers = ["billie", "ariana", "lizzo", "leon"]</code></p>

<ol>
  <li>Can you print out their names capitalized?</li>
  <li>Can you print out their names in all caps?</li>
  <li>Can you print out their names but reversed? (<code class="highlighter-rouge">["leon", "lizzo", "ariana", "billie"]</code>)</li>
  <li>Can you create a new array with only the names that are longer than four letters in length?</li>
  <li>Can you create a new array with the lengths of their names?</li>
</ol>

<p>Now, with this array can you do the following using <code class="highlighter-rouge">.each</code>?</p>

<p><code class="highlighter-rouge">numbers = [1,2,3,4,5]</code></p>

<ol>
  <li>Can you create a new array with only the odd numbers?</li>
  <li>Can you create a new array with only the even numbers?</li>
  <li>Can you print out each number doubled?</li>
  <li>Can you print out if the number is divisible by 2 or not?</li>
  <li>Can you find the the sum of the numbers?</li>
</ol>

<h3 id="additional-resources">Additional Resources</h3>

<ul>
  <li><a href="https://vimeo.com/160173522">Video</a></li>
</ul>
:ET
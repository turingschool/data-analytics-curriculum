I"ˇ7<h1 id="pokemon-cli">Pokemon CLI</h1>

<p>We are going to be working with the <a href="http://pokeapi.co/">Pokemon API</a> and create a tool that can find us pok√© info in no time.</p>

<p>This is how I feel about that.</p>

<p><img src="https://media.giphy.com/media/MhHXeM4SpKrpC/giphy.gif" alt="" /></p>

<h2 id="part-0-up-and-running">Part 0. Up and running</h2>

<p>First, let‚Äôs create the repo:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mkdir </span>pokemon-cli <span class="o">&amp;&amp;</span> <span class="nb">cd </span>pokemon-cli
</code></pre></div></div>

<p>Then, create a lib folder and our Pokemon service:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">touch </span>pokemon_service.rb
</code></pre></div></div>
<hr />

<h2 id="part-1-the-plan">Part 1. The Plan</h2>

<p>We are going to build a small tool that we can interact with in a pry session. The methods we are going to build out are the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pokemon_information
next_evolution
types
evolutions
pokemon_for_type
get
</code></pre></div></div>

<h2 id="part-2-apis">Part 2. API‚Äôs?</h2>

<p>API‚Äôs can be bit tricky to wrap your head around, but we can demystify them pretty easily with a few examples. Think of API‚Äôs as external data, and if you ask for your data in the agreed upon way, you get the data you asked for back. API‚Äôs are databases and each action in the controllers are referred to as <code class="highlighter-rouge">endpoints</code>. <code class="highlighter-rouge">/turing-school/students/dj-greenfield</code> is an example of an endpoint. Think of the endpoints as the available routes in an application for the developer to send requests to.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>_______                                                                     _________
| MY  | -----------&gt; GET /turing-school/students/dj-greenfield -----------&gt; | Turing |   
|     |                                                                     |        |
| APP | &lt;------ {student: { name: "DJ Greenfield", cohort: 1412}} &lt;-------- |  API   |
|_____|                                                                     |________|

</code></pre></div></div>

<p>We make a <code class="highlighter-rouge">GET</code> request from our app to the Turing API hitting the <code class="highlighter-rouge">/turing-school/students/:name</code> endpoint. The API returns information about the given student.</p>

<p>Let‚Äôs make some calls to the GitHub API using curl.</p>

<p>We can ask for all info about a repo, using the conventions outlined in the <a href="https://developer.github.com/v3/">GitHub API docs</a>.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">-i</span> <span class="s2">"https://api.github.com/repos/rails/rails"</span>
</code></pre></div></div>

<p>We can also ask for all the issues related to the repository:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">-i</span> <span class="s2">"https://api.github.com/repos/rails/rails/issues"</span>
</code></pre></div></div>

<p>And get all the closed issues:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">-i</span> <span class="s2">"https://api.github.com/repos/rails/rails/issues?state=closed"</span>
</code></pre></div></div>

<h4 id="your-turn">Your turn</h4>

<ul>
  <li>Can you find all open issues related to the repo?</li>
  <li>Can you find all languages related to the repo?</li>
  <li>Can you find the forks url related to the repo?</li>
  <li>Can you find all stargazers related to the repo?</li>
</ul>

<h4 id="additional-resources">Additional resources</h4>

<ul>
  <li><a href="https://developer.github.com/v3/">GitHub API docs</a></li>
  <li><a href="https://www.quora.com/What-is-an-API">Quora: What is an API?</a></li>
</ul>

<h2 id="part-3-establishing-a-connection">Part 3. Establishing a connection</h2>

<p>We are going to use the Pokemon API to find information about our favorite Pokemon. If you don‚Äôt have a favorite Pokemon, pick Pikachu.</p>

<p><img src="https://media.giphy.com/media/MJcf161ptwviU/giphy.gif" alt="" /></p>

<p>In <code class="highlighter-rouge">pokemon_service.rb</code>, add a method <code class="highlighter-rouge">get</code> we can use to send requests to the Pokemon API:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>require 'net/http'
require 'json'

class PokemonService

  def get(url: url = "http://pokeapi.co/api/v1/", path: path)
    uri = URI(url + path + "/")
    response = Net::HTTP.get_response(uri)
    JSON.parse(response.body)
  end

end
</code></pre></div></div>

<p>We require the <code class="highlighter-rouge">net/http</code> library so we can make GET requests from our Ruby program, and we require JSON to be able to parse the JSON response we get back from the API.</p>

<p>We are passing the path to the method and the base url is set as a default argument in case we would like to talk to different APIs. The first line composes the URL using the base URL and the path that we are going hit. The path defines which endpoint we hit in the API.</p>

<p>On the second line we make the request using the <code class="highlighter-rouge">Net::HTTP</code> library. This is just a regular stdlib Ruby library, it‚Äôs built into Ruby but we need to require it (like JSON) since it‚Äôs not required by default. The return value will be a JSON hash that we parse on the last line of the method.</p>

<p>Try it out from the command line!</p>

<ul>
  <li>Open a new pry session.</li>
  <li>Require <code class="highlighter-rouge">./pokemon_service</code>.</li>
  <li>Create a new instance of the Pokemon Service, <code class="highlighter-rouge">pokemon_service = PokemonService.new</code>.</li>
  <li>Send a request to get information about a Pokemon, <code class="highlighter-rouge">response = pokemon_service.get(path: 'pokemon/25')</code></li>
</ul>

<p>Yeeei! We have information about a Pokemon! Check out the Pokemon API docs linked below</p>

<p><strong>NOTE:</strong> you can search Pokemon both by id and by name, so <code class="highlighter-rouge">path: pokemon/25</code> and <code class="highlighter-rouge">path: pokemon/pikachu</code> return the same data.</p>

<h4 id="your-turn-1">Your turn</h4>

<p>From the command line, find the following information using the response:</p>
<ul>
  <li>Name of the Pokemon</li>
  <li>Find the Pokemon‚Äôs types</li>
  <li>Find the Pokemon‚Äôs evolutions</li>
</ul>

<p>Make a new request and find the following Pokemon:</p>
<ul>
  <li>A Pokemon with the id of 500</li>
  <li>A Pokemon with the name of ‚Äúsquirtle‚Äù</li>
</ul>

<p><strong>NOTE:</strong> All Pokemon names need to be lowercased in the query.</p>

<h4 id="additional-resources-1">Additional resources</h4>

<ul>
  <li><a href="http://pokeapi.co/docsv2/">Pokemon API docs</a></li>
  <li><a href="http://ruby-doc.org/stdlib-2.3.0/libdoc/net/http/rdoc/Net/HTTP.html">Net::HTTP docs</a></li>
</ul>

<h2 id="part-4-interacting-with-the-pok√©-api">Part 4. Interacting with the Pok√© API</h2>

<p>We are going to write some code that will find Pokemon by id, name and type. Id and name are interchangeable in this API, so the method we are going to write will be able to return information about a Pokemon given either its name or id.</p>

<p>Let‚Äôs see if we can find a way to get information about a Pokemon given it‚Äôs name (or id).</p>

<div class="language-rb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">pokemon_information</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
  <span class="n">path</span> <span class="o">=</span> <span class="s2">"pokemon/</span><span class="si">#{</span><span class="n">info</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">get</span><span class="p">(</span><span class="ss">path: </span><span class="n">path</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Hop over to the pry session and see if you can use our new method to get information about Pokemon!</p>

<p>It should behave as follows:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>1] pry<span class="o">(</span>main<span class="o">)&gt;</span> require <span class="s1">'./pokemon_service'</span>
<span class="o">=&gt;</span> <span class="nb">true</span>
<span class="o">[</span>2] pry<span class="o">(</span>main<span class="o">)&gt;</span> p <span class="o">=</span> PokemonService.new
<span class="o">=&gt;</span> <span class="c">#&lt;PokemonService:0x007fefe0d274b8&gt;</span>
<span class="o">[</span>3] pry<span class="o">(</span>main<span class="o">)&gt;</span> response <span class="o">=</span> p.pokemon_information<span class="o">(</span>7<span class="o">)</span>
<span class="o">=&gt;</span> <span class="c"># a bunch of code</span>
<span class="o">[</span>3] pry<span class="o">(</span>main<span class="o">)&gt;</span> response[<span class="s2">"name"</span><span class="o">]</span>
<span class="o">=&gt;</span> <span class="s2">"Squirtle"</span>
</code></pre></div></div>

<h4 id="find-all-moves-for-a-given-pokemon">Find all moves for a given Pokemon</h4>

<p>We would like to output an array of strings with the names of the Pokemon‚Äôs moves.</p>

<p>If you go to <code class="highlighter-rouge">http://pokeapi.co/api/v1/pokemon/25/</code> in the browser you see that the Pokemon has a <code class="highlighter-rouge">moves</code> key which points to an array with JSON objects. We want to get the array with JSON objects, iterate over it to collect the names of the moves, and then return them.</p>

<div class="language-rb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_moves_for</span><span class="p">(</span><span class="n">pokemon</span><span class="p">)</span>
  <span class="n">response</span> <span class="o">=</span> <span class="n">pokemon_information</span><span class="p">(</span><span class="n">pokemon</span><span class="p">)</span>

  <span class="n">response</span><span class="p">[</span><span class="s2">"moves"</span><span class="p">].</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">move</span><span class="o">|</span> <span class="n">move</span><span class="p">[</span><span class="s2">"name"</span><span class="p">]</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div></div>

<h4 id="find-the-next-evolution-for-a-given-pokemon">Find the next evolution for a given Pokemon</h4>

<p>Write a method that behaves as follows:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>id = 7
response = PokemonService.new.next_evolution(id)
#=&gt; "Wartortle"
</code></pre></div></div>

<h4 id="your-turn-2">Your turn</h4>

<p>Write a method that returns all of the evolutions for a given Pokemon. This is necessary because some Pokemon have more than one evolution, but the Pokemon API only returns the immediate evolution (as seen in the latest method).</p>

<p>For example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>id = 7
response = PokemonService.new.evolutions(id)
#=&gt; "Wartortle", "Blastoise, Blastoise-mega"

name = "lapras"
response = PokemonService.new.evolutions(name)
#=&gt; ""
</code></pre></div></div>

<h2 id="part-5-interacting-even-more-with-the-pokemon-api">Part 5. Interacting even more with the Pokemon API</h2>

<p>It‚Äôs soon time for us to part ways, but before we do there are a few more methods we need to implement.</p>

<h3 id="get-all-types-related-to-a-pokemon">Get all types related to a Pokemon</h3>

<p>Write a method that returns all types related to a given Pokemon.</p>

<p>For example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>id = 7
response = PokemonService.new.types(id)
#=&gt; "water"

id = 6
response = PokemonService.new.types(id)
#=&gt; "flying, fire"
</code></pre></div></div>

<h3 id="get-all-pokemon-related-to-a-type">Get all Pokemon related to a type</h3>

<p>Write a method that returns all Pokemon related to a given type.</p>

<p>For example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>type = "fire"
response = PokemonService.new.pokemon_for_type(type)
#=&gt; "Name", "Name", "Name".....

type = "water"
response = PokemonService.new.pokemon_for_type(type)
#=&gt; "Name", "Name", "Name".....
</code></pre></div></div>

<p><strong>NOTE:</strong> There are 718 total Pokemon availble in the API.</p>

<h4 id="your-turn-3">Your turn</h4>

<p>Be like no one ever was and make your methods more flexible in terms of arguments.</p>

<ul>
  <li>Change the <code class="highlighter-rouge">#pokemon_for_type</code> method to receive two types and find all Pokemon that match both types given.</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PokemonService.new.pokemon_for_type("flying", "fire")
#=&gt; "Charizard", "Moltres"....
</code></pre></div></div>

<h2 id="part-6-now-you-are-really-on-your-own">Part 6. Now you are really on your own‚Ä¶</h2>

<p>If you want more practice with APIs, check out this micro-twitter <a href="http://tutorials.jumpstartlab.com/projects/microblogger.html">tutorial</a>.</p>

<p>If you feel comfortable with this material, use the GitHub API (or find an API on your own) to create a similar program.</p>

<p>API Suggestions:</p>

<ul>
  <li><a href="http://www.omdbapi.com/">The Open Movie Database</a></li>
  <li><a href="https://sunlightfoundation.com/api/">Sunlight - Government Data</a></li>
</ul>
:ET
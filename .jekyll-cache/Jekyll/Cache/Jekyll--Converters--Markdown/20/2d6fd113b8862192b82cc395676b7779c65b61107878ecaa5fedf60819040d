I"#<h2 id="iteration-4---supporting-post-tags">Iteration 4 - Supporting Post “Tags”</h2>

<p>Next, let’s enhance our blogging engine by adding support to attach tags to our posts. Ultimately when a user tags a post, we want to accomplish 2 things:</p>

<ol>
  <li>The list of tags attached to a post should appear on the final rendered page for that post</li>
  <li>When generating the site, it should generate individual Tag Pages for each tag that appears in a post</li>
  <li>Each Tag Page should include a list of links to all the posts that are marked with that tag.</li>
</ol>

<h3 id="1-tagging-a-post">1. Tagging a Post</h3>

<p>To accomplish tagging, let’s add an additional “metadata” section to our post documents. The metadata will appear at the top of the post document and be separated from the actual content by a row of <code class="highlighter-rouge">---</code> above and below.</p>

<p>Inside the metadata section, we’ll allow users to attach metadata to a post using a “hash-like” key-value syntax. Putting these together a final example will look like:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
tags: Italian Food, flatbread
---
# My Post on Pizza

* nom
* nom, nom
</code></pre></div></div>

<h3 id="2-reading-and-parsing-tag-metadata">2. Reading and Parsing Tag Metadata</h3>

<p>With this structure in place, we’ll want to add an additional step to our build process – before we can render the markdown content of a post, we’ll need to first extract and parse the metadata attached to it. From this section of the document, we want to extract the key and value pair(s). In this case we’d come up with something like <code class="highlighter-rouge">{"tags" =&gt; ["Italian Food", "flatbread"]}</code>.</p>

<h3 id="3-cleaning-tag-names">3. Cleaning Tag Names</h3>

<p>English tag names like <code class="highlighter-rouge">Italian Food</code> are great for users but will be a bit difficult for our system. Let’s improve this by cleaning all user-provided tag names to be:</p>

<ol>
  <li>Lower-cased</li>
  <li>Snake-cased (using underscores to separate multiple words)</li>
</ol>

<p>So for example, <code class="highlighter-rouge">Italian Food</code> becomes <code class="highlighter-rouge">italian_food</code>.</p>

<h3 id="4-building-tag-digest-pages">4. Building Tag “Digest” Pages</h3>

<p>Add an additional step to your <code class="highlighter-rouge">build</code> process which accomplishes the following:</p>

<ol>
  <li>Compile a list of all of the tags mentioned across all of the posts</li>
  <li>For each of them, generate an output page at <code class="highlighter-rouge">_output/tags/my_tag.html</code></li>
  <li>On this page, include the name of the tag <strong>and</strong> a bulleted-list of links pointing to all of the posts which are labeled with that tag</li>
</ol>

<p>For example if we consider the simple example from above with our Pizza post, we might end up with the following structure after building:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>worace @ hyde_sample ➸  tree .
.
├── _output
│   ├── css
│   │   └── main.css
│   ├── index.html
│   ├── pages
│   │   └── about.html
│   ├── tags
│   │   └── italian_food.html
│   │   └── flatbread.html
│   └── posts
│       └── 2016-02-20-pizza.html
└── source
    ├── css
    │   └── main.css
    ├── index.markdown
    ├── pages
    │   └── about.markdown
    └── posts
        └── 2016-02-20-pizza.markdown
</code></pre></div></div>

<p>On each of these tag pages, we would expect to see a link to the appropriate pizza post <code class="highlighter-rouge">/posts/2016-02-20-pizza.html</code></p>

<h3 id="5-linking-to-a-posts-tags-from-the-post">5. Linking to a post’s tags from the post</h3>

<p>Finally, let’s also include a list of links on each post page pointing to each of its tags. So in our pizza example, we would want to see 2 links, one to <code class="highlighter-rouge">/tags/italian_food.html</code> and one to <code class="highlighter-rouge">/tags/flatbread.html</code>. You can arrange these within the post’s rendered content however you feel is best.</p>
:ET
I"r%<h1 id="intro-to-test-driven-development-tdd">Intro to Test-Driven Development (TDD)</h1>

<h2 id="learning-objectives">Learning Objectives</h2>

<ul>
  <li>Explain and demonstrate the TDD workflow</li>
  <li>Create and run a <code class="highlighter-rouge">minitest</code> test suite (including assertions)</li>
  <li>Interpret error messages &amp; stack trace; adjust implementation code to fix error messages</li>
  <li>Interpret test failures &amp; fix implementation accordingly</li>
</ul>

<h2 id="vocabulary">Vocabulary</h2>

<ul>
  <li>TDD</li>
  <li>Test Error/Failure</li>
  <li>Stack Trace</li>
  <li>minitest assertion</li>
</ul>

<h2 id="warm-up">Warm-up</h2>

<p>Assume that you have a <code class="highlighter-rouge">Person</code> and a <code class="highlighter-rouge">Dog</code> class.
Assume all dogs have owners.</p>

<ul>
  <li>How might you represent the idea of a dog having an owner in code?</li>
  <li>Write an <code class="highlighter-rouge">initialize</code> method for <code class="highlighter-rouge">Dog</code></li>
  <li>What do you need to put in a runner file to access both classes?</li>
  <li>How did you confirm your last projects were working correctly? What are the downsides to this approach?</li>
</ul>

<h2 id="test-driven-development-tdd-overview">Test-Driven Development (TDD) Overview</h2>

<p>As we write increasingly complex applications, we’ll need more sophisticated testing approaches to secure the same level of confidence.</p>

<h3 id="advantages">Advantages</h3>

<p>TDD is a process for writing code that helps:</p>

<ul>
  <li>Drive your development! (Intentional coding)</li>
  <li>Ensure your code works the way you intend</li>
  <li>Create code that is understandable to others</li>
  <li>Create code that is cheap and easy to change</li>
</ul>

<h3 id="difficulties">Difficulties</h3>

<ul>
  <li>Learning a Domain Specific Language (DSL; a computer language specialized to a particular application domain)</li>
  <li>Planning what we want to happen</li>
  <li>Taking bite sized chunks</li>
</ul>

<h3 id="using-tdd">Using TDD</h3>

<ul>
  <li>Write tests before you write code (radical, we know)</li>
  <li>Use a testing framework such as <code class="highlighter-rouge">minitest</code> to structure your testing suite</li>
  <li><strong>Red-Green-Refactor</strong> process to implement complexity to your application</li>
</ul>

<h2 id="tdd-code-along-with-minitest">TDD Code-Along with <code class="highlighter-rouge">minitest</code></h2>

<h3 id="file-structure">File Structure</h3>

<ul>
  <li>One project directory</li>
  <li>One file for test code</li>
  <li>One file for implementation code</li>
</ul>

<h3 id="scenario-specifications">Scenario Specifications</h3>

<ul>
  <li>Students have names</li>
  <li>Students have laptops. The laptop is usually an Apple, but it can be any brand</li>
  <li>Students can bring various flavors of cookies to their instructors, but double-chocolate brownie chunk flavor can never be wrong</li>
</ul>

<h3 id="minitest-setup">minitest Setup</h3>

<p><a href="http://docs.seattlerb.org/minitest/">Minitest</a> is a framework used for automated testing. It is the testing framework used on many of the homework exercises you’ve been assigned.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gem install minitest
</code></pre></div></div>

<ul>
  <li>Require <code class="highlighter-rouge">minitest/autorun</code> - the easy and explicit way to run all your tests</li>
  <li>Require <code class="highlighter-rouge">minitest/pride</code> - vivid color explosion</li>
  <li>Test class inherits from Minitest::Test
    <ul>
      <li><code class="highlighter-rouge">test</code> is a <code class="highlighter-rouge">minitest</code> module; <code class="highlighter-rouge">::</code> is a scope resolution operator</li>
      <li>minitest/test is a small and incredibly fast unit testing framework. It provides a rich set of assertions to make your tests clean and readable.</li>
    </ul>
  </li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># student_test.rb</span>
<span class="nb">require</span> <span class="s1">'minitest'</span>
<span class="nb">require</span> <span class="s1">'minitest/autorun'</span>
<span class="nb">require</span> <span class="s1">'minitest/pride'</span>

<span class="k">class</span> <span class="nc">StudentTest</span> <span class="o">&lt;</span> <span class="no">Minitest</span><span class="o">::</span><span class="no">Test</span>
  <span class="c1"># test it exists</span>
  <span class="c1"># test it has a name</span>
  <span class="c1"># test it has a laptop</span>
  <span class="c1"># test it has cookies</span>
<span class="k">end</span>
</code></pre></div></div>

<h2 id="tdd-cycle-red-green-refactor">TDD Cycle: Red, Green, Refactor</h2>

<p>Red-green-refactor is a process for writing code that involves three steps.</p>

<ol>
  <li>Write a failing test (red)</li>
  <li>Write implementation code to make the test pass (green)</li>
  <li>Clean up your code if necessary (refactor)</li>
</ol>

<h3 id="minitest-testing"><code class="highlighter-rouge">minitest</code> Testing</h3>

<ul>
  <li>Tests in <code class="highlighter-rouge">minitest</code> start with <code class="highlighter-rouge">def test_something</code></li>
  <li>Assertions (or refutations) start with the <strong>assertion method</strong>, followed by the <strong>expected</strong> value, followed by the <strong>actual</strong> value</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">assert_equal</span> <span class="s1">'expected'</span><span class="p">,</span> <span class="s1">'actual'</span>
</code></pre></div></div>

<p>Let’s build on our Student Test!</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_it_exists</span>
  <span class="n">student</span> <span class="o">=</span> <span class="no">Student</span><span class="p">.</span><span class="nf">new</span>
  <span class="n">assert_instance_of</span> <span class="no">Student</span><span class="p">,</span> <span class="n">student</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">test_student_has_a_name</span>
  <span class="n">student</span> <span class="o">=</span> <span class="no">Student</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"Penelope"</span><span class="p">)</span>
  <span class="n">assert_equal</span> <span class="s2">"Penelope"</span><span class="p">,</span> <span class="n">student</span><span class="p">.</span><span class="nf">name</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="learn-to-love-the-error-learn-to-love-the-failure">Learn to Love the Error, Learn to Love the Failure</h3>

<p>They’re your friends, seriously. Take time to understand each error and failure you encounter. You’ll be seeing those same error messages over and over again, so the sooner you connect what they mean to what you need to fix, the smoother you’ll be sailing.</p>

<h3 id="solving-an-error-or-a-failure">Solving an Error or a Failure</h3>

<ol>
  <li>Run the test</li>
  <li>Read the error/failure message, including stack trace
    <ul>
      <li>stacks are LIFO (last-in, first-out like a stack of dishes)</li>
      <li>call stack is a stack that stores information about the active subroutines of a computer program (often referred to as ‘the stack’)</li>
      <li>stack trace is a report of the active stack frames at a certain point in time during the execution of a program</li>
      <li>fun-fact: queues are FIFO (first-in, first-out, like a European line-up)</li>
    </ul>
  </li>
  <li>Write implementation code to make the test pass</li>
</ol>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Student</span>
  <span class="nb">attr_reader</span> <span class="ss">:name</span>
  
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
    <span class="vi">@name</span> <span class="o">=</span> <span class="nb">name</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="turn--talk">Turn &amp; Talk</h3>

<ul>
  <li>What made sense? What was easy?</li>
  <li>What do you need more practice with?</li>
</ul>

<h2 id="tdd-practice">TDD Practice</h2>

<ul>
  <li>Repeat TDD process for remaining <code class="highlighter-rouge">Student</code> specifications
OR</li>
  <li>Practice TDD with this UNICORN <a href="http://tutorials.jumpstartlab.com/topics/testing/intro-to-tdd.html">tutorial</a></li>
</ul>

<h2 id="recap">Recap</h2>

<ul>
  <li>What is the color-related catchphrase for TDD workflow?</li>
  <li><code class="highlighter-rouge">minitest</code> setup
    <ul>
      <li>What do you have to require in a test file?</li>
      <li>What does your test class inherit from?</li>
      <li>What is the syntax for a minitest test? Assertion?</li>
    </ul>
  </li>
  <li>What’s the main difference between an error and a failure?</li>
  <li>How do you read a stack trace?</li>
</ul>

<h2 id="further-learning">Further Learning</h2>
<ul>
  <li>Explore the gem! <a href="https://github.com/seattlerb/minitest">https://github.com/seattlerb/minitest</a></li>
</ul>
:ET
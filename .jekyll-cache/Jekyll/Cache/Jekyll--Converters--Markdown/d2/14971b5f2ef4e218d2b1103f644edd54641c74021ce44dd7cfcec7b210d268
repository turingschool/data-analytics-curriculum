I"ï/<h2 id="learning-goals">Learning Goals</h2>

<ul>
  <li>Students are familiar with common security practices, vulnerabilities and resources</li>
</ul>

<h2 id="intro">Intro</h2>

<p>We‚Äôve shown you best practices for security in Rails (authorization, authentication, strong params, etc), but Rails is not the only game in town. Let‚Äôs talk about some of these concepts in general, and how they may apply in the various applications you build, and enable you to speak about these concepts from an educated perspective.</p>

<h2 id="review-of-concepts">Review of Concepts</h2>

<p>These are a few concepts <a href="../../module3/lessons/fundamental_rails_security">covered in Mod 3</a>.</p>

<ul>
  <li><a href="https://en.wikipedia.org/wiki/Privilege_escalation">Privilege Escalation</a>
    <ul>
      <li>Privilege escalation is the act of exploiting a bug, design flaw or configuration oversight in an operating system or software application to gain elevated access to resources that are normally protected from an application or user. The result is that an application with more privileges than intended by the application developer or system administrator can perform unauthorized actions.</li>
    </ul>
  </li>
  <li><a href="https://www.owasp.org/index.php/Mass_Assignment_Cheat_Sheet">Mass Assignment Vulnerabilities</a>
    <ul>
      <li>Software frameworks sometime allow developers to automatically bind HTTP request parameters into program code variables or objects to make using that framework easier on developers. This can sometimes cause harm. Attackers can sometimes use this methodology to create new parameters that the developer never intended which in turn creates or overwrites new variable or objects in program code that was not intended. This is called a mass assignment vulnerability.</li>
    </ul>
  </li>
  <li><a href="https://www.owasp.org/index.php/Cross-site_Scripting_(XSS)">Cross-Site Scriptin (XSS)</a>
    <ul>
      <li>Cross-Site Scripting (XSS) attacks are a type of injection, in which malicious scripts are injected into otherwise benign and trusted web sites. XSS attacks occur when an attacker uses a web application to send malicious code, generally in the form of a browser side script, to a different end user. Flaws that allow these attacks to succeed are quite widespread and occur anywhere a web application uses input from a user within the output it generates without validating or encoding it.</li>
    </ul>
  </li>
</ul>

<p>You‚Äôve been exposed to security concepts applied in Rails, but let‚Äôs talk about security more generally. The following are concepts and terms you‚Äôll see in all types of web applications, regardless of the language.</p>

<h2 id="best-practices">Best Practices</h2>

<h3 id="ssl">SSL</h3>

<p>You may not have thought about it, but interaction you have between your browser and a webserver has to go through a network of computers, and it‚Äôs all exposed to anyone else on that network. Secure Socket Layer sits on top of HTTP, encrypting all traffic between a browser and server.</p>

<h4 id="resources">Resources</h4>

<p><a href="https://letsencrypt.org/docs/">Let‚Äôs Encrypt</a> is trying to make adding SSL to your application much simpler. Check them out when wanting to add an SSL cert to your own server.</p>

<p>How do two computers that have never met each other have an encrypted conversation? <a href="https://www.youtube.com/watch?v=3p_e00tEZM8">You Tube explanation of SSL handshake</a></p>

<h4 id="https">HTTPS</h4>

<p>HTTPS is a combination of HTTP and SSL protocols. It makes clear to users they are on a secure site making secure network requests.</p>

<p>BONUS: Heroku and Github Pages already provide HTTPS security for sites you host through them!</p>

<h3 id="hashing-and-sensitive-data">Hashing and Sensitive Data</h3>

<ul>
  <li>What is a hash (in the cryptographic sense)?</li>
  <li>What kinds of things should be hashed?</li>
  <li>What kinds of things can‚Äôt be hashed?</li>
  <li>What do you do with data that is private but can‚Äôt be hashed?</li>
</ul>

<h2 id="security-terms-and-concepts">Security Terms and Concepts</h2>

<h3 id="publicprivate-key-pairs">Public/Private Key Pairs</h3>

<p>I‚Äôve heard several drawn out explanations and metaphors of public/private keys. If you google around, it shouldn‚Äôt be too hard to find them. Here‚Äôs what you need to know:</p>

<ul>
  <li>These keys are both used to encrypt messages</li>
  <li>Messages encrypted with one key can only be decrypted with the other key
    <ul>
      <li>Messages encrypted with your public key can only be decrypted with your private key</li>
      <li>Messages encrypted with your private key can only be decrypted with your public key</li>
    </ul>
  </li>
  <li>If someone encrypts something with your public key (anyone can, it‚Äôs public), they know only you can decrypt it, because you hold the companion private key</li>
  <li>If you encrypt something with your private key, and then encrypt that with someone else‚Äôs public key, then they can decrypt the message with their private key, and then use your public key to confirm that the message really came from you, and hasn‚Äôt been tampered with.</li>
</ul>

<p>Rarely have I ever manually used these keys. I‚Äôve only ever used them with other software that does the necessary encrypting and decrypting for me. The idea itself is fascinating, though.</p>

<h4 id="some-uses-of-publicprivate-key-pairs">Some Uses of Public/Private Key Pairs</h4>

<ul>
  <li><a href="https://en.wikipedia.org/wiki/Transport_Layer_Security">SSL (Secure Socket Layer)</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Secure_Shell">SSH (Secure Shell)</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Pretty_Good_Privacy">PGP (Pretty Good Privacy)</a></li>
</ul>

<h3 id="uuids">UUIDs</h3>

<p><a href="https://en.wikipedia.org/wiki/Universally_unique_identifier">UUIDs</a> are Universally Unique Identifiers. The algorithm resposible for generating them creates almost 0 chance that the ID created has ever been created before - not perfect, but certainly good enough.</p>

<p>There are two concepts worth covering here:</p>

<ol>
  <li>Sequential ID numbers (the types of IDs you‚Äôve been using this whole time) can be a security risk</li>
  <li>UUIDs are a common replacement for sequential IDs</li>
</ol>

<p>Interested in more? Read about <a href="https://www.postgresql.org/docs/8.3/static/datatype-uuid.html">UUID as a Postgres data type</a>.</p>

<h3 id="secrets">Secrets</h3>

<p>There‚Äôs not much to define here. Secrets are usually random strings, and they‚Äôre not to be made public. On their own, secrets don‚Äôt do much. But they‚Äôre used to encrypt information, or to prove identity and data integrity.</p>

<p>Secrets like Rails‚Äô <code class="highlighter-rouge">SECRET_KEY_BASE</code> are used to encrypt session data so that clients can‚Äôt read or tamper with it.</p>

<h3 id="signatures">Signatures</h3>

<p>Signatures are made by hashing some data or message along with a secret to prove that the data hasn‚Äôt been tampered with, and the data came from the right person.</p>

<p>This diagram pretty well illustrates signature creation and verification:</p>

<p><img src="https://www.tutorialspoint.com/cryptography/images/model_digital_signature.jpg" alt="https://www.tutorialspoint.com/cryptography/images/model_digital_signature.jpg" /></p>

<h3 id="tokens">Tokens</h3>

<p>Tokens are temporary strings that represent some other data, typically a combination of identity(s) and permissions. That‚Äôs pretty broad, but there are many types of tokens, and they follow different rules.</p>

<ul>
  <li>Some tokens are public. It‚Äôs fine to pass them around to clients and in URLs</li>
  <li>Some tokens are private. They‚Äôre like keys to unlock access to specific resources.</li>
  <li>Some tokens encode data. The string itself is ‚Äúdecryptable‚Äù to get information about what it represents</li>
  <li>Some tokens are arbitrary data. As long as you hold the string, you can use it to identify yourself.</li>
</ul>

<h2 id="attack-types">Attack Types</h2>

<h3 id="man-in-the-middle"><a href="https://en.wikipedia.org/wiki/Man-in-the-middle_attack">Man-in-the-Middle</a></h3>

<p>Man in the Middle attacks are any attacks that involve modifying the communication between a client and server. They involve a malicious actor listening to traffic between a client and server, and inserting their own data. Ever notice Xfinity putting their logo on your screen while you use their public wifi?</p>

<p>An easy way to prevent against these attacks are to encrypt the traffic. This is why you don‚Äôt ever see the Xfinity logo on websites you visit using SSL.</p>

<h3 id="replay"><a href="https://en.wikipedia.org/wiki/Replay_attack">Replay</a></h3>

<p>Replay attacks store your traffic to play it again later. You encrypted a message to take some action (post a tweet, change settings, buy headphones), and if someone records that message, they can just replay it to cause the same action to happen again.</p>

<p>Prevention of replay attacks typically involve including timestamps in your requests, or <a href="https://en.wikipedia.org/wiki/Cryptographic_nonce">cryptographic nonces</a> (short for Number Only Used Once)</p>

<h3 id="clickjacking"><a href="https://en.wikipedia.org/wiki/Clickjacking">Clickjacking</a></h3>

<p>This is employed on malicious websites to make you do things on other websites. Since you‚Äôre typically logged in to all of your sites all the time, they will bring other sites into their own website and get you to take actions you probably didn‚Äôt want to take. Common examples are liking, favoriting or retweeting something you‚Äôve never heard of.</p>

<p>Here‚Äôs a video showing off an example of clickjacking: <a href="https://www.youtube.com/watch?v=ZkooSj-SvpE">https://www.youtube.com/watch?v=ZkooSj-SvpE</a></p>

<p>Since most clickjacking takes advantage of iframes, a common prevention measure is to prevent the browser from allowing your site to be loaded in an iframe.</p>

<h3 id="injection">Injection</h3>

<p>Injection happens any time instructions are added to what is usually data. It causes your site to execute some instruction while trying to work with data.</p>

<p>The two most common types are SQL injection, and JavaScript injection. Prevention starts with never trusting user input. You can ‚Äúsanitize‚Äù inputs by removing any characters or strings that shouldn‚Äôt be there. If someone is using SQL in their input, strip it out before sending it to your database. If someone puts <code class="highlighter-rouge">&lt;script&gt;</code> tags in their post, strip them out.</p>

<p>Most frameworks do these things for you, as long as you don‚Äôt subvert them. Injection problems typically come up when you‚Äôre trying to solve some other problem, and you end up working around the protections in place. If you interpolate user input right into commands you send to your database, you‚Äôre at risk. If you write user content directly to the page without stripping HTML tags, you‚Äôre at risk.</p>

<p>Click through these to read more about <a href="http://guides.rubyonrails.org/security.html">Rails security</a> and <a href="https://expressjs.com/en/advanced/best-practice-security.html">Express security</a>.</p>

<h2 id="next-steps">Next Steps</h2>

<p>Security is best left to security experts, but as a developer, you need to do your best to not leave holes in your application. Learn the best practices, and try to understand new security risks as they become discovered.</p>

<p>If you‚Äôd like to continue learning about application security concepts, and learn about best practices for preventing them, check out the <a href="https://www.owasp.org/">Open Web Application Security Project</a>. It‚Äôs just a wiki, so it can be a little disorganized at times, but it‚Äôs designed to be a place to learn only what you need to know as a developer, as opposed to learning to be a web security expert.</p>

<p>A great place to start is OWASP‚Äôs <a href="https://www.owasp.org/index.php/OWASP_Top_Ten_Cheat_Sheet">Top 10 Cheat Sheet</a>.</p>
:ET